#summary this page explains how to get started with ActiveJDBC

<wiki:toc max_depth="2" />

Although ActiveJDBC has advanced features, simple things are very easy. This page shows simplest cases of DB access with ActiveJDBC.

=Pre-requisite=

   * Java (obvious)
   * Maven
   * ActiveJDBC already installed on your computer. This is done (currently) by building it from sources. See "How to build" section on main page: [http://code.google.com/p/activejdbc/].

=Create a standard Maven project structure=
While ActiveJDBC does not have to be used with Maven, this example (as well as ActiveJDBC itself) was built with Maven. To see the project itself, you can check it out from SVN:
{{{
svn co https://activejdbc.googlecode.com/svn/trunk/examples/simple-example/
}}}

The best way is to check out this project and start playing with it. Take a look at the {{{run.sh}}} script at the root of this example project.

= Create a table =
This is an SQL statement to create a table (MySQL used for this example):
{{{
CREATE TABLE employees (
      id  int(11) DEFAULT NULL auto_increment PRIMARY KEY,
      first_name VARCHAR(56),
      last_name VARCHAR(56)
  );
}}}

=Maven configuration=

==Add ActiveJDBC  dependency==
{{{

        <dependency>
            <groupId>activejdbc</groupId>
            <artifactId>activejdbc</artifactId>
            <version>1.0-SNAPSHOT</version>
            <exclusions>
                <exclusion>
                    <groupId>opensymphony</groupId>
                    <artifactId>oscache</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
}}}

The OSCache is excluded because it is not really used in this simple example. In a real project, if query cache is used, the OSCache dependency will be required.


==Add ActiveJDBC Instrumentation plugin==
In the plugins section of the POM, add this:
{{{
             <plugin>
                <groupId>activejdbc</groupId>
                <artifactId>activejdbc-instrumentation</artifactId>
                <version>1.0-SNAPSHOT</version>
                <executions>
                    <execution>
                        <phase>process-classes</phase>
                        <goals><goal>instrument</goal></goals>
                    </execution>
                </executions>
            </plugin>
}}}

=Write a model=

This is the easiest thing - writing a simple model is usually done with one line of code:
{{{
import activejdbc.Model;

public class Employee extends Model {}
}}}

Please, note that the name of a table is "employees" - plural, and the name of a model is "Employee" - singular. ActiveJDBC uses inflections of English language to do conversion of plural and singular forms of words. This of course can be overridden by @Table annotation.

=Open a connection=
{{{
Base.open("com.mysql.jdbc.Driver", "jdbc:mysql://localhost/test", "root", "p@ssw0rd");
}}}

Replace the values for the ones that make sense for your environment.
Base is a utility class that allows to perform some basic (hence the name) JDBC operations, one of them is opening a connection. The connection object is then attached to the current thread, and can be consumed by any ActiveJDBC API.

=Create a new record =
{{{
Employee e = new Employee();
e.set("first_name", "John");
e.set("last_name", "Doe");
e.saveIt();
}}}

I hope this is self-explanatory. ActiveJDBC models somewhat behave like maps. There are no setters or getters. You can still write them if you like. 

=Finding a single record=
{{{
Employee e = Employee.findFirst("first_name = ?", "John");
}}}
This line will find an instance of Employee (conditionally), if one exists, or null if one does not exist.

=Finding some records=
{{{
List<Employee> employees = Employee.where("first_name = ?", "John");
}}}

=Updating a record=
This snippet should also be self-explanatory:
{{{
Employee e = Employee.findFirst("first_name = ?", "John");
e.set("last_name", "Steinbeck").saveIt();
}}}

=Deleting a record=
{{{
Employee e = Employee.findFirst("first_name = ?", "John");
e.delete();
}}}

=Deleting all records=
{{{
Employee.deleteAll();
}}}

=Selecting all records=
{{{
List<Employee> employees = Employee.findAll();
}}}

=Conclusion=
I hope this quick introduction provides enough information to get started. It also shows how simple ActiveJDBC APIs are. The project has many advanced features, such as automatic recognition of associations, caching, validations, polymorphic associations, etc. The examples on this page can be found and executed in the included Maven project here: https://activejdbc.googlecode.com/svn/trunk/examples/simple-example/

Read the [Features] section for a more in depth information on the framework.




Enjoy